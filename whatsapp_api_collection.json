{
    "info": {
        "_postman_id": "a8d1a7d3-2e2e-4b1a-9b7a-0a2b1a1b1b1b",
        "name": "Simple WhatsApp API",
        "description": "Postman collection for the Simple WhatsApp API. This collection includes examples for each endpoint and a pre-request script to handle authentication.\n\n**Authentication:**\n- **X-MASTER-KEY**: This global key protects the entire server. It can be provided in the `X-MASTER-KEY` header or in the request body. Set the `MASTER_API_KEY` variable in your Postman environment to automatically include it in the header of every request.\n- **X-API-KEY**: This session-specific key identifies a WhatsApp session. For GET requests, it must be in the `X-API-KEY` header. For POST requests, it can be in the header or the request body. Set the `X_API_KEY` variable in your environment to automatically include it in the header.",
        "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
    },
    "item": [
        {
            "name": "Authentication",
            "item": [
                {
                    "name": "Get QR Code (String)",
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": {
                            "raw": "{{baseUrl}}/api/connect",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "api",
                                "connect"
                            ]
                        },
                        "description": "Establishes a new WhatsApp session and returns the QR code as a string. Requires the `X-API-KEY` header (set the `X_API_KEY` environment variable)."
                    },
                    "response": []
                },
                {
                    "name": "Get QR Code (Image)",
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": {
                            "raw": "{{baseUrl}}/api/connect/image",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "api",
                                "connect",
                                "image"
                            ]
                        },
                        "description": "Establishes a new WhatsApp session and returns the QR code as a PNG image. Requires the `X-API-KEY` header (set the `X_API_KEY` environment variable)."
                    },
                    "response": []
                }
            ],
            "description": "API endpoints for authentication and session management"
        },
        {
            "name": "Messaging",
            "item": [
                {
                    "name": "Send Text Message",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"X-API-KEY\": \"your_session_key_here\",\n    \"to\": \"+1234567890\",\n    \"message\": \"Hello from the API!\"\n}",
                            "options": {
                                "raw": {
                                    "language": "json"
                                }
                            }
                        },
                        "url": {
                            "raw": "{{baseUrl}}/api/send-message",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "api",
                                "send-message"
                            ]
                        },
                        "description": "Sends a text message to a specified number. The `X-API-KEY` can be provided in the header (if the `X_API_KEY` environment variable is set) or in the request body."
                    },
                    "response": []
                },
                {
                    "name": "Send Attachment (Upload)",
                    "request": {
                        "method": "POST",
                        "header": [],
                        "body": {
                            "mode": "formdata",
                            "formdata": [
                                {
                                    "key": "X-API-KEY",
                                    "value": "your_session_key_here",
                                    "type": "text",
                                    "description": "Session key if not in header"
                                },
                                {
                                    "key": "to",
                                    "value": "+1234567890",
                                    "type": "text"
                                },
                                {
                                    "key": "caption",
                                    "value": "Check out this cool file!",
                                    "type": "text"
                                },
                                {
                                    "key": "file",
                                    "type": "file",
                                    "src": []
                                }
                            ]
                        },
                        "url": {
                            "raw": "{{baseUrl}}/api/send-attachment",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "api",
                                "send-attachment"
                            ]
                        },
                        "description": "Sends an attachment by uploading a file directly. The `X-API-KEY` can be provided in the header or as a form field."
                    },
                    "response": []
                },
                {
                    "name": "Send Message (GET)",
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": {
                            "raw": "{{baseUrl}}/api/send?number=+1234567890&message=Hello via GET",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "api",
                                "send"
                            ],
                            "query": [
                                {
                                    "key": "number",
                                    "value": "+1234567890"
                                },
                                {
                                    "key": "message",
                                    "value": "Hello via GET"
                                }
                            ]
                        },
                        "description": "Sends a message using a GET request. Requires the `X-API-KEY` header (set the `X_API_KEY` environment variable)."
                    },
                    "response": []
                }
            ],
            "description": "API endpoints for sending messages"
        },
        {
            "name": "File Upload",
            "item": [
                {
                    "name": "Upload File",
                    "request": {
                        "method": "POST",
                        "header": [],
                        "body": {
                            "mode": "formdata",
                            "formdata": [
                                {
                                    "key": "file",
                                    "type": "file",
                                    "src": []
                                }
                            ]
                        },
                        "url": {
                            "raw": "{{baseUrl}}/api/upload",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "api",
                                "upload"
                            ]
                        },
                        "description": "Uploads a file to the server to get a temporary URL. This endpoint does not require an `X-API-KEY`."
                    },
                    "response": []
                }
            ],
            "description": "API endpoints for file uploads"
        }
    ],
    "event": [
        {
            "listen": "prerequest",
            "script": {
                "type": "text/javascript",
                "exec": [
                    "// This script runs before every request in the collection.",
                    "// It adds authentication headers from your Postman environment.",
                    "",
                    "// Add the global Master API Key from the 'MASTER_API_KEY' environment variable.",
                    "const masterKey = pm.environment.get('MASTER_API_KEY') || 'SUPER_SECRET_KEY';",
                    "pm.request.headers.add({",
                    "    key: 'X-MASTER-KEY',",
                    "    value: masterKey",
                    "});",
                    "",
                    "// Add the session-specific API Key from the 'X_API_KEY' environment variable.",
                    "const sessionKey = pm.environment.get('X_API_KEY');",
                    "if (sessionKey) {",
                    "    pm.request.headers.add({",
                    "        key: 'X-API-KEY',",
                    "        value: sessionKey",
                    "    });",
                    "}"
                ]
            }
        }
    ],
    "variable": [
        {
            "key": "baseUrl",
            "value": "http://localhost:3000",
            "type": "default"
        }
    ]
}